/// Tairitsu WIT interfaces for bidirectional host-guest communication
///
/// This file defines the core interfaces that Tairitsu uses for:
/// 1. Host calling guest functions (guest-api)
/// 2. Guest calling host functions (host-api)

package tairitsu:core;

/// World that represents the complete Tairitsu environment
world tairitsu {
    /// Import host APIs that guest can call
    import host-api;

    /// Export guest APIs that host can call
    export guest-api;
}

/// Host API - functions provided by host that guest can call
interface host-api {
    /// Log a message from the guest
    log: func(message: string);

    /// Execute a command and get result
    execute: func(command: string, args: list<string>) -> result<string, string>;

    /// Get the current timestamp
    timestamp: func() -> u64;

    /// Set a configuration value
    configset: func(key: string, value: string) -> result<_, string>;

    /// Get a configuration value
    configget: func(key: string) -> result<string, string>;
}

/// Guest API - functions provided by guest that host can call
interface guest-api {
    /// Initialize the guest module
    init: func() -> result<_, string>;

    /// Process a request
    process: func(input: string) -> result<string, string>;

    /// Get guest name
    getname: func() -> string;

    /// Get guest version
    getversion: func() -> string;

    /// Get guest features
    getfeatures: func() -> list<string>;

    /// Shutdown the guest module
    shutdown: func() -> result<_, string>;

    /// Handle a notification
    notify: func(event: string, data: string) -> result<_, string>;
}
